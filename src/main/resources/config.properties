triplestore.namespace = sealit-data
service.url = http://localhost:8084/A-QuB-2-AccessServices

service.timeout=6
service.max.result.count=10000 

# from entity to entity through the final results. All internal URIs should start with that prefix.
uri.prefix = http://localhost

# The state of the portal can be public or private (if the state is public, the user role editing is not allowed)
#portal.state = private
portal.state = public

# CONFIGURATION 


### binariesPath = C:\\Projects\\AQuB\\

defaultNamedgraphs = http://graph/sealit 

#####################################
############# ENTITIES #############
#####################################


# ------ SOME GUIDELINES -------
# entities = ID1,ID2,ID3,... // the entities to consider --all other entities are ignored (even if we have all the information needed)
# entities.ID.name // the display name of the entity
# entities.ID.entityType // NUMERIC|BOOLEAN|STRING|LITERAL_GEOSPATIAL (the type of the entity)(we need this for knowing how to filter based on the user input)
# entities.ID.instancesQuery // template query that returns the distinct number of instances (it contains the template parameter [[FROM_GRAPHS]])
# entities.ID.searchQuery // template query for defining: i) how to search entities of this type (before defining relations with other entities), and ii) what to display in the search results...it contains the template parameters [[FROM_GRAPHS]] and [[FILTER(VARIABLE_TO_FILTER)]]
# entities.ID.sourceUriVariable // the variable (in SELECT) of the search query that contains the URI of the entity (we do not want to show it, but we want to know it for exploring the entity when clicking on it)
# entities.ID.exploreQuery // template query for defining how to explore instances of this entity (when the user clicks on an entity shown in the results)
# entities.ID.exploreVariableTypes // the variables (in SELECT) of the exploreQuery that represent URIs of other entities and the corresponding entity IDs (we need to know them for enabling browsing the related entities)
    # ***TO DO*** (add '?' before the name of the variables like in the sourceUriVariable)
# entities.ID.isVisibleInTarget // TRUE|FALSE (it defines if the entity should be shown in the list of "target" entities, under "Searching for...")

entities = 1,2,3,4,5,6,7,8,9,10

entities.1.name = Person
entities.1.entityType = LITERAL
entities.1.instancesQuery = SELECT COUNT(DISTINCT ?uri) [[FROM_GRAPHS]] WHERE { ?uri a <http://www.cidoc-crm.org/cidoc-crm/E21_Person> ; <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/type/master> }
entities.1.searchQuery = SELECT DISTINCT ?uri ?firstname ?lastname (substr(str(?birth_date), 1, 4) AS ?birth_year) ?residence ?serial_number ?profession [[FROM_GRAPHS]] WHERE {\
         ?uri a <http://www.cidoc-crm.org/cidoc-crm/E21_Person> ; \
         <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/type/master> ; \
         <http://www.w3.org/2000/01/rdf-schema#label> ?label [[REGEX(?label)]] \
         OPTIONAL { ?uri <http://www.sealit.gr/ontology/sealit#has_first_name> ?firstname } \
         OPTIONAL { ?uri <http://www.sealit.gr/ontology/sealit#has_last_name> ?lastname } \
         OPTIONAL { ?uri <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.cidoc-crm.org/cidoc-crm/P74_has_current_or_former_residence> ?res . ?resMaster <http://www.w3.org/2002/07/owl#sameAs> ?res ; <http://www.w3.org/2000/01/rdf-schema#label> ?residence } \
         OPTIONAL { ?uri <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.sealit.gr/ontology/sealit#has_profession> ?prof . ?prof <http://www.w3.org/2000/01/rdf-schema#label> ?profession }\
         OPTIONAL { ?uri <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.cidoc-crm.org/cidoc-crm/P1_is_identified_by> ?ident . ?ident <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/numbers/serial%20number> ; <http://www.w3.org/2000/01/rdf-schema#label> ?serial_number }\
         OPTIONAL { ?uri <http://www.cidoc-crm.org/cidoc-crm/P98i_was_born> ?born . ?born <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?timespan . ?timespan <http://www.cidoc-crm.org/cidoc-crm/P82_at_some_time_within> ?birth_date } }
entities.1.exploreQuery = SELECT ?firstname ?lastname (substr(str(?birth_date), 1, 4) AS ?birth_year) ?profession ?residence ?residence__residence_location ?serial_number [[FROM_GRAPHS]] WHERE { OPTIONAL { [[URI]] <http://www.sealit.gr/ontology/sealit#has_first_name> ?firstname } OPTIONAL { [[URI]] <http://www.sealit.gr/ontology/sealit#has_last_name> ?lastname } OPTIONAL { [[URI]] <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.sealit.gr/ontology/sealit#has_profession> ?profess . ?profess <http://www.w3.org/2000/01/rdf-schema#label> ?profession } OPTIONAL { [[URI]] <http://www.cidoc-crm.org/cidoc-crm/P98i_was_born> ?born . ?born <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?timespan . ?timespan <http://www.cidoc-crm.org/cidoc-crm/P82_at_some_time_within> ?birth_date } OPTIONAL { [[URI]] <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.cidoc-crm.org/cidoc-crm/P74_has_current_or_former_residence> ?res . ?residence <http://www.w3.org/2002/07/owl#sameAs> ?res  ; <http://www.w3.org/2000/01/rdf-schema#label> ?residence__residence_location } OPTIONAL { [[URI]] <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.cidoc-crm.org/cidoc-crm/P1_is_identified_by> ?ident . ?ident <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/numbers/serial%20number> ; <http://www.w3.org/2000/01/rdf-schema#label> ?serial_number } }
entities.1.exploreVariableTypes = residence:2
entities.1.sourceUriVariable = ?uri
#entities.1.entityType = LITERAL
# ?x <http://www.cidoc-crm.org/cidoc-crm/P67_refers_to> ?personUri ; <http://www.cidoc-crm.org/cidoc-crm/P67_refers_to> ?doc . ?doc <http://www.w3.org/2000/01/rdf-schema#seeAlso> ?recordUrl
#(replace(str(?firstname), '\\\\?', '[illegible]') as ?firstname) (replace(str(?lastname), '\\\\?', '[illegible]') as ?lastname) 

entities.2.name = Place
entities.2.entityType = LITERAL
entities.2.instancesQuery = SELECT COUNT(DISTINCT ?uri) [[FROM_GRAPHS]] WHERE { ?uri a <http://www.cidoc-crm.org/cidoc-crm/E53_Place> ; <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/type/master> }
entities.2.searchQuery = SELECT DISTINCT ?uri ?name ?type ?tgn ?geonames ?coordinates [[FROM_GRAPHS]] WHERE { \
    ?uri a <http://www.cidoc-crm.org/cidoc-crm/E53_Place> ; <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/type/master> ; <http://www.w3.org/2000/01/rdf-schema#label> ?name [[REGEX(?name)]] \
    OPTIONAL { ?uri <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> ?tp . ?tp <http://www.w3.org/2000/01/rdf-schema#label> ?type } \
    OPTIONAL { ?uri <http://www.cidoc-crm.org/cidoc-crm/P1_is_identified_by> ?id1 . ?id1 <http://www.cidoc-crm.org/cidoc-crm/P71i_is_listed_in> <https://rs.sealitproject.eu/kb/authority%20types/tgn> ; <http://www.w3.org/2000/01/rdf-schema#label> ?tgn } \
    OPTIONAL { ?uri <http://www.cidoc-crm.org/cidoc-crm/P1_is_identified_by> ?id2 . ?id2 <http://www.cidoc-crm.org/cidoc-crm/P71i_is_listed_in> <https://rs.sealitproject.eu/kb/authority%20types/geonames> ; <http://www.w3.org/2000/01/rdf-schema#label> ?geonames } \
    OPTIONAL { ?uri <http://www.cidoc-crm.org/cidoc-crm/P168_place_is_defined_by> ?id3 . ?id3 a <http://www.cidoc-crm.org/cidoc-crm/E94_Space_Primitive> ; <http://www.w3.org/2000/01/rdf-schema#label> ?coordinates } } 
entities.2.exploreQuery = SELECT ?name ?type ?TGN ?Geonames ?Coordinates [[FROM_GRAPHS]] WHERE { OPTIONAL { [[URI]] <http://www.w3.org/2000/01/rdf-schema#label> ?name } OPTIONAL { {[[URI]] <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> ?tp FILTER(?tp != <https://rs.sealitproject.eu/kb/type/master>) . ?tp <http://www.w3.org/2000/01/rdf-schema#label> ?type } UNION { [[URI]] <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> ?tp . ?tp <http://www.w3.org/2000/01/rdf-schema#label> ?type } } OPTIONAL { [[URI]] <http://www.cidoc-crm.org/cidoc-crm/P1_is_identified_by> ?id1 . ?id1 <http://www.cidoc-crm.org/cidoc-crm/P71i_is_listed_in> <https://rs.sealitproject.eu/kb/authority%20types/tgn> ; <http://www.w3.org/2000/01/rdf-schema#label> ?TGN } OPTIONAL { [[URI]] <http://www.cidoc-crm.org/cidoc-crm/P1_is_identified_by> ?id2 . ?id2 <http://www.cidoc-crm.org/cidoc-crm/P71i_is_listed_in> <https://rs.sealitproject.eu/kb/authority%20types/geonames> ; <http://www.w3.org/2000/01/rdf-schema#label> ?Geonames } OPTIONAL { [[URI]] <http://www.cidoc-crm.org/cidoc-crm/P168_place_is_defined_by> ?id3 . ?id3 a <http://www.cidoc-crm.org/cidoc-crm/E94_Space_Primitive> ; <http://www.w3.org/2000/01/rdf-schema#label> ?Coordinates } }
entities.2.sourceUriVariable = ?uri

entities.3.name = Ship
entities.3.entityType = LITERAL
entities.3.instancesQuery = SELECT COUNT(DISTINCT ?uri) [[FROM_GRAPHS]] WHERE { ?uri a <http://www.sealit.gr/ontology/sealit#Ship> ; <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/type/master> }
entities.3.searchQuery = SELECT DISTINCT ?uri ?name ?type ?reg_number ?tonnage ?construction_place (substr(str(?constructionDate), 1, 4) AS ?construction_date) ?owner [[FROM_GRAPHS]] WHERE {\
    ?uri a <http://www.sealit.gr/ontology/sealit#Ship> ; <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/type/master> ; <http://www.w3.org/2000/01/rdf-schema#label> ?name [[REGEX(?name)]] \
    OPTIONAL { ?uri <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> ?shiptype . ?shiptype <http://www.w3.org/2000/01/rdf-schema#label> ?type } \
    OPTIONAL { ?uri <http://www.sealit.gr/ontology/sealit#is_registered_by> ?reg .  ?reg <http://www.sealit.gr/ontology/sealit#with_ship_ID> ?shipid . ?shipid <http://www.w3.org/2000/01/rdf-schema#label> ?reg_number } \
    OPTIONAL { ?uri <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.sealit.gr/ontology/sealit#has_tonnage> ?shiptonnage .  ?shiptonnage <http://www.cidoc-crm.org/cidoc-crm/P90_has_value> ?tonnage } \
    OPTIONAL { ?uri <http://www.sealit.gr/ontology/sealit#was_constructed_by> ?constr .  ?constr <http://www.cidoc-crm.org/cidoc-crm/P7_took_place_at> ?constrPl . ?constrPl <http://www.w3.org/2000/01/rdf-schema#label> ?construction_place } \
    OPTIONAL { ?uri <http://www.sealit.gr/ontology/sealit#was_constructed_by> ?constr2 .  ?constr2 <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?constrTm . ?constrTm <http://www.cidoc-crm.org/cidoc-crm/P82_at_some_time_within> ?constructionDate } \
    OPTIONAL { ?uri <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.sealit.gr/ontology/sealit#has_ownership_phase> ?ownPhase .  ?ownPhase <http://www.sealit.gr/ontology/sealit#has_owner> ?ownuri . ?ownuri <http://www.w3.org/2000/01/rdf-schema#label> ?owner } }
entities.3.exploreQuery = SELECT ?name ?type ?reg_number ?tonnage ?construction ?construction__construction_place (substr(str(?constructionDate), 1, 4) AS ?construction_date) ?owner ?owner__owner [[FROM_GRAPHS]] WHERE { [[URI]] <http://www.w3.org/2000/01/rdf-schema#label> ?name  OPTIONAL { [[URI]] <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> ?shiptype . ?shiptype <http://www.w3.org/2000/01/rdf-schema#label> ?type } OPTIONAL { [[URI]] <http://www.sealit.gr/ontology/sealit#is_registered_by> ?reg .  ?reg <http://www.sealit.gr/ontology/sealit#with_ship_ID> ?shipid . ?shipid <http://www.w3.org/2000/01/rdf-schema#label> ?reg_number } OPTIONAL { [[URI]] <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.sealit.gr/ontology/sealit#has_tonnage> ?shiptonnage .  ?shiptonnage <http://www.cidoc-crm.org/cidoc-crm/P90_has_value> ?tonnage } OPTIONAL { [[URI]] <http://www.sealit.gr/ontology/sealit#was_constructed_by> ?constr .  ?constr <http://www.cidoc-crm.org/cidoc-crm/P7_took_place_at> ?constrPl . ?construction <http://www.w3.org/2002/07/owl#sameAs> ?constrPl ; <http://www.w3.org/2000/01/rdf-schema#label> ?construction__construction_place } OPTIONAL { [[URI]] <http://www.sealit.gr/ontology/sealit#was_constructed_by> ?constr2 .  ?constr2 <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?constrTm . ?constrTm <http://www.cidoc-crm.org/cidoc-crm/P82_at_some_time_within> ?constructionDate } OPTIONAL { [[URI]] <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.sealit.gr/ontology/sealit#has_ownership_phase> ?ownPhase .  ?ownPhase <http://www.sealit.gr/ontology/sealit#has_owner> ?ownuri . ?owner <http://www.w3.org/2002/07/owl#sameAs> ?ownuri ; <http://www.w3.org/2000/01/rdf-schema#label> ?owner__owner } }
entities.3.exploreVariableTypes = construction:2; owner:1
entities.3.sourceUriVariable = ?uri

entities.4.name = Voyage
entities.4.entityType = LITERAL
entities.4.instancesQuery = SELECT COUNT(DISTINCT ?uri) [[FROM_GRAPHS]] WHERE { ?uri a <http://www.sealit.gr/ontology/sealit#Voyage> }
entities.4.searchQuery = SELECT DISTINCT ?uri ?name ?ship ?destination ?begin_date ?end_date ?crew_number [[FROM_GRAPHS]] WHERE { \
    ?uri a <http://www.sealit.gr/ontology/sealit#Voyage> ; <http://www.w3.org/2000/01/rdf-schema#label> ?name [[REGEX(?name)]] . \
    OPTIONAL { ?shipUri <http://www.sealit.gr/ontology/sealit#voyages> ?uri ; <http://www.w3.org/2000/01/rdf-schema#label> ?ship } \
    OPTIONAL { ?uri <http://www.sealit.gr/ontology/sealit#destination> ?voyageDestination . ?voyageDestination <http://www.w3.org/2000/01/rdf-schema#label> ?destination } \
    OPTIONAL { ?uri <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?ts . ?ts <http://www.cidoc-crm.org/cidoc-crm/P82a_begin_of_the_begin> ?begin_date ; <http://www.cidoc-crm.org/cidoc-crm/P82b_end_of_the_end> ?end_date } \
    OPTIONAL { ?uri <http://www.cidoc-crm.org/cidoc-crm/P14_carried_out_by> ?by . ?by a <http://www.cidoc-crm.org/cidoc-crm/E74_Group> ; <http://www.cidoc-crm.org/cidoc-crm/P3_has_note> ?crew_number } }
entities.4.exploreQuery = SELECT ?name ?ship ?ship__ship_name ?destination ?destination__destination_location ?begin_date ?end_date ?crew_number [[FROM_GRAPHS]] WHERE { [[URI]] <http://www.w3.org/2000/01/rdf-schema#label> ?name OPTIONAL { ?ship <http://www.w3.org/2002/07/owl#sameAs> ?shipInst ; <http://www.w3.org/2000/01/rdf-schema#label> ?ship__ship_name . ?shipInst <http://www.sealit.gr/ontology/sealit#voyages> [[URI]] } OPTIONAL { [[URI]] <http://www.sealit.gr/ontology/sealit#destination> ?destination . ?destination <http://www.w3.org/2000/01/rdf-schema#label> ?destination__destination_location } OPTIONAL { [[URI]] <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?ts . ?ts <http://www.cidoc-crm.org/cidoc-crm/P82a_begin_of_the_begin> ?begin_date ; <http://www.cidoc-crm.org/cidoc-crm/P82b_end_of_the_end> ?end_date } OPTIONAL { [[URI]] <http://www.cidoc-crm.org/cidoc-crm/P14_carried_out_by> ?by . ?by a <http://www.cidoc-crm.org/cidoc-crm/E74_Group> ; <http://www.cidoc-crm.org/cidoc-crm/P3_has_note> ?crew_number } }
entities.4.exploreVariableTypes = ship:3; destination:2
entities.4.sourceUriVariable = ?uri

entities.5.name = Employment
entities.5.entityType = LITERAL
entities.5.instancesQuery = SELECT COUNT(DISTINCT ?uri) [[FROM_GRAPHS]] WHERE { ?uri a <http://www.sealit.gr/ontology/sealit#Crew_Payment> }
entities.5.searchQuery = SELECT DISTINCT ?uri ?employment ?person ?profession (CONCAT(str(?started_date), " (", ?start_place, ")") AS ?started) (CONCAT(str(?ended_date), " (", ?end_place, ")") AS ?ended) (CONCAT(str(?amount), " ", ?currency, " ", ?payment_type) AS ?payment) [[FROM_GRAPHS]] WHERE { \
    ?uri a <http://www.sealit.gr/ontology/sealit#Crew_Payment> ; <http://www.sealit.gr/ontology/sealit#for_service> ?service . ?service <http://www.w3.org/2000/01/rdf-schema#label> ?employment [[REGEX(?employment)]] . ?personUri <http://www.sealit.gr/ontology/sealit#received_money> ?uri ; <http://www.w3.org/2000/01/rdf-schema#label> ?person . \
    OPTIONAL { ?uri <http://www.cidoc-crm.org/cidoc-crm/P01i_is_domain_of> ?prof . ?prof <http://www.cidoc-crm.org/cidoc-crm/P14.1_in_the_role_of> ?profRole . ?profRole <http://www.w3.org/2000/01/rdf-schema#label> ?profession } \
    OPTIONAL { ?service <http://www.sealit.gr/ontology/sealit#started_by> ?startedBy ; <http://www.sealit.gr/ontology/sealit#ended_by> ?endedBy . ?startedBy <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?stTim ; <http://www.cidoc-crm.org/cidoc-crm/P7_took_place_at> ?startPlace. ?stTim <http://www.cidoc-crm.org/cidoc-crm/P82_at_some_time_within> ?started_date . ?startPlace <http://www.w3.org/2000/01/rdf-schema#label> ?start_place . ?endedBy <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?endTim ; <http://www.cidoc-crm.org/cidoc-crm/P7_took_place_at> ?endPlace . ?endTim <http://www.cidoc-crm.org/cidoc-crm/P82_at_some_time_within> ?ended_date . ?endPlace <http://www.w3.org/2000/01/rdf-schema#label> ?end_place } \
    OPTIONAL { ?uri <http://www.sealit.gr/ontology/sealit#had_money_value> ?mon . ?mon <http://www.cidoc-crm.org/cidoc-crm/P90_has_value> ?amount ; <http://www.cidoc-crm.org/cidoc-crm/P180_has_currency> ?cc . ?cc <http://www.w3.org/2000/01/rdf-schema#label> ?currency OPTIONAL { ?mon <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> ?paymentTypeUri . ?paymentTypeUri <http://www.w3.org/2000/01/rdf-schema#label> ?payment_type } } } 
entities.5.exploreQuery = SELECT ?employment ?person ?person__person_name ?profession (CONCAT(str(?started_date), " (", ?start_place, ")") AS ?started) (CONCAT(str(?ended_date), " (", ?end_place, ")") AS ?ended) (CONCAT(str(?amount), " ", ?currency, " ", ?payment_type) AS ?payment) [[FROM_GRAPHS]] WHERE { [[URI]] a <http://www.sealit.gr/ontology/sealit#Crew_Payment> ; <http://www.sealit.gr/ontology/sealit#for_service> ?service . ?service <http://www.w3.org/2000/01/rdf-schema#label> ?employment . ?person <http://www.w3.org/2002/07/owl#sameAs> ?sameAsPerson ; <http://www.w3.org/2000/01/rdf-schema#label> ?person__person_name . ?sameAsPerson <http://www.sealit.gr/ontology/sealit#received_money> [[URI]] . OPTIONAL { [[URI]] <http://www.cidoc-crm.org/cidoc-crm/P01i_is_domain_of> ?prof . ?prof <http://www.cidoc-crm.org/cidoc-crm/P14.1_in_the_role_of> ?profRole . ?profRole <http://www.w3.org/2000/01/rdf-schema#label> ?profession } OPTIONAL { ?service <http://www.sealit.gr/ontology/sealit#started_by> ?startedBy ; <http://www.sealit.gr/ontology/sealit#ended_by> ?endedBy . ?startedBy <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?stTim ; <http://www.cidoc-crm.org/cidoc-crm/P7_took_place_at> ?startPlace. ?stTim <http://www.cidoc-crm.org/cidoc-crm/P82_at_some_time_within> ?started_date . ?startPlace <http://www.w3.org/2000/01/rdf-schema#label> ?start_place . ?endedBy <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?endTim ; <http://www.cidoc-crm.org/cidoc-crm/P7_took_place_at> ?endPlace . ?endTim <http://www.cidoc-crm.org/cidoc-crm/P82_at_some_time_within> ?ended_date . ?endPlace <http://www.w3.org/2000/01/rdf-schema#label> ?end_place } OPTIONAL { [[URI]] <http://www.sealit.gr/ontology/sealit#had_money_value> ?mon . ?mon <http://www.cidoc-crm.org/cidoc-crm/P90_has_value> ?amount ; <http://www.cidoc-crm.org/cidoc-crm/P180_has_currency> ?cc . ?cc <http://www.w3.org/2000/01/rdf-schema#label> ?currency OPTIONAL { ?mon <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> ?paymentTypeUri . ?paymentTypeUri <http://www.w3.org/2000/01/rdf-schema#label> ?payment_type } } } 
entities.5.exploreVariableTypes = person:1
entities.5.sourceUriVariable = ?uri
#   OPTIONAL { ?prs a <http://www.cidoc-crm.org/cidoc-crm/E21_Person> ; <http://www.sealit.gr/ontology/sealit#gave_service_for> ?uri ; <http://www.w3.org/2000/01/rdf-schema#label> ?person } \
#   OPTIONAL { ?uri <http://www.sealit.gr/ontology/sealit#for_service> ?serv2 . ?prs <http://www.sealit.gr/ontology/sealit#had_provided> ?serv2 ; <http://www.w3.org/2000/01/rdf-schema#label> ?person } \
#   OPTIONAL { ?voy <http://www.cidoc-crm.org/cidoc-crm/P14_carried_out_by> ?person ; <http://www.w3.org/2000/01/rdf-schema#label> ?voyage . ?person <http://www.sealit.gr/ontology/sealit#gave_service_for> ?uri } \

entities.6.name = Legal Body
entities.6.instancesQuery = SELECT COUNT(DISTINCT ?uri) [[FROM_GRAPHS]] WHERE { ?uri a <http://www.cidoc-crm.org/cidoc-crm/E74_Group> ; <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/type/master> } 
entities.6.searchQuery = SELECT DISTINCT ?uri ?name ?location [[FROM_GRAPHS]] WHERE { \
   ?uri a <http://www.cidoc-crm.org/cidoc-crm/E74_Group> ; <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/type/master> ; <http://www.w3.org/2000/01/rdf-schema#label> ?name [[REGEX(?name)]] \
   OPTIONAL { ?uri <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.cidoc-crm.org/cidoc-crm/P74_has_current_or_former_residence> ?loc . ?loc <http://www.w3.org/2000/01/rdf-schema#label> ?location } }
entities.6.entityType = LITERAL
entities.6.exploreQuery = SELECT DISTINCT ?name ?location ?location__location_name [[FROM_GRAPHS]] WHERE { [[URI]] <http://www.w3.org/2000/01/rdf-schema#label> ?name OPTIONAL { [[URI]] <http://www.w3.org/2002/07/owl#sameAs> ?sameas . ?sameas <http://www.cidoc-crm.org/cidoc-crm/P74_has_current_or_former_residence> ?loc . ?location <http://www.w3.org/2002/07/owl#sameAs> ?loc ; <http://www.w3.org/2000/01/rdf-schema#label> ?location__location_name } }
entities.6.exploreVariableTypes = location:2
entities.6.sourceUriVariable = ?uri

entities.7.name = Record
entities.7.entityType = LITERAL
entities.7.instancesQuery = SELECT COUNT(DISTINCT ?uri) [[FROM_GRAPHS]] WHERE { ?uri a <http://www.cidoc-crm.org/cidoc-crm/E73_Information_Object> ; <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/doc%20types/record%20information> }
entities.7.searchQuery = SELECT DISTINCT ?uri ?record_name ?template ?document ?document_date ?document_organisation ?document_location ?document_language (CONCAT(str(?transcriberName), " (", ?trOrg, ")") AS ?transcriber)  [[FROM_GRAPHS]] WHERE { \
    ?uri a <http://www.cidoc-crm.org/cidoc-crm/E73_Information_Object> ; <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/doc%20types/record%20information> . \
    ?uri <http://www.w3.org/2000/01/rdf-schema#label> ?record_name [[REGEX(?record_name)]] . \
    ?uri <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> ?templType FILTER(?templType != <https://rs.sealitproject.eu/kb/doc%20types/record%20information>). ?templType <http://www.w3.org/2000/01/rdf-schema#label> ?template .\
    OPTIONAL { ?uri <http://www.cidoc-crm.org/cidoc-crm/P94i_was_created_by> ?creation . ?creation  <http://www.cidoc-crm.org/cidoc-crm/P14_carried_out_by> ?creatorUri . ?creatorUri <http://www.w3.org/2000/01/rdf-schema#label> ?transcriberName ; <http://www.cidoc-crm.org/cidoc-crm/P107i_is_current_or_former_member_of> ?transcrOrg . ?transcrOrg <http://www.w3.org/2000/01/rdf-schema#label> ?trOrg } \
    OPTIONAL { ?uri <http://www.cidoc-crm.org/cidoc-crm/P67_refers_to> ?docuri . ?docuri <http://www.w3.org/2000/01/rdf-schema#label> ?document } \
    OPTIONAL { ?uri <http://www.cidoc-crm.org/cidoc-crm/P67_refers_to> ?docuri . ?docuri  <http://www.cidoc-crm.org/cidoc-crm/P94i_was_created_by> ?doccreation . ?doccreation <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?doctimespan . ?doctimespan <http://www.cidoc-crm.org/cidoc-crm/P82a_begin_of_the_begin> ?document_date } \
    OPTIONAL { ?uri <http://www.cidoc-crm.org/cidoc-crm/P67_refers_to> ?docuri . ?docuri  <http://www.cidoc-crm.org/cidoc-crm/P49_has_former_or_current_keeper> ?docloc . ?docloc <http://www.w3.org/2000/01/rdf-schema#label> ?document_organisation ; <http://www.cidoc-crm.org/cidoc-crm/P74_has_current_or_former_residence> ?cityUri . ?cityUri <http://www.w3.org/2000/01/rdf-schema#label> ?document_location } \
    OPTIONAL { ?uri <http://www.cidoc-crm.org/cidoc-crm/P67_refers_to> ?docuri . ?docuri  <http://www.cidoc-crm.org/cidoc-crm/P128_carries> ?ling . ?ling <http://www.cidoc-crm.org/cidoc-crm/P72_has_language> ?lang . ?lang <http://www.w3.org/2000/01/rdf-schema#label> ?document_language } } 
entities.7.exploreQuery = SELECT DISTINCT ?record_name ?template ?document ?document_date ?document_organisation ?document_location ?document_location__document_location ?document_language (CONCAT(str(?transcriberName), " (", ?trOrg, ")") AS ?transcriber)  [[FROM_GRAPHS]] WHERE { [[URI]] a <http://www.cidoc-crm.org/cidoc-crm/E73_Information_Object> ; <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/doc%20types/record%20information> . [[URI]] <http://www.w3.org/2000/01/rdf-schema#label> ?record_name . [[URI]] <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> ?templType FILTER(?templType != <https://rs.sealitproject.eu/kb/doc%20types/record%20information>). ?templType <http://www.w3.org/2000/01/rdf-schema#label> ?template . OPTIONAL { [[URI]] <http://www.cidoc-crm.org/cidoc-crm/P94i_was_created_by> ?creation . ?creation  <http://www.cidoc-crm.org/cidoc-crm/P14_carried_out_by> ?creatorUri . ?creatorUri <http://www.w3.org/2000/01/rdf-schema#label> ?transcriberName ; <http://www.cidoc-crm.org/cidoc-crm/P107i_is_current_or_former_member_of> ?transcrOrg . ?transcrOrg <http://www.w3.org/2000/01/rdf-schema#label> ?trOrg } OPTIONAL { [[URI]] <http://www.cidoc-crm.org/cidoc-crm/P67_refers_to> ?docuri . ?docuri <http://www.w3.org/2000/01/rdf-schema#label> ?document } OPTIONAL { [[URI]] <http://www.cidoc-crm.org/cidoc-crm/P67_refers_to> ?docuri . ?docuri  <http://www.cidoc-crm.org/cidoc-crm/P94i_was_created_by> ?doccreation . ?doccreation <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?doctimespan . ?doctimespan <http://www.cidoc-crm.org/cidoc-crm/P82a_begin_of_the_begin> ?document_date } OPTIONAL { [[URI]] <http://www.cidoc-crm.org/cidoc-crm/P67_refers_to> ?docuri . ?docuri  <http://www.cidoc-crm.org/cidoc-crm/P49_has_former_or_current_keeper> ?docloc . ?docloc <http://www.w3.org/2000/01/rdf-schema#label> ?document_organisation ; <http://www.cidoc-crm.org/cidoc-crm/P74_has_current_or_former_residence> ?cityUri . ?document_location <http://www.w3.org/2002/07/owl#sameAs> ?cityUri ; <http://www.w3.org/2000/01/rdf-schema#label> ?document_location__document_location } OPTIONAL { [[URI]] <http://www.cidoc-crm.org/cidoc-crm/P67_refers_to> ?docuri . ?docuri  <http://www.cidoc-crm.org/cidoc-crm/P128_carries> ?ling . ?ling <http://www.cidoc-crm.org/cidoc-crm/P72_has_language> ?lang . ?lang <http://www.w3.org/2000/01/rdf-schema#label> ?document_language } } 
entities.7.exploreVariableTypes = document_location:2
entities.7.sourceUriVariable = ?uri

entities.8.name = Date
entities.8.entityType = TEMPORAL
entities.8.isVisibleInTarget = false

entities.9.name = Year 
entities.9.entityType = NUMERIC
entities.9.isVisibleInTarget = false

entities.10.name = Profession 
entities.10.entityType = STRING
entities.10.isVisibleInTarget = false

#entities.8.name = CerifPerson
#entities.8.instancesQuery = SELECT COUNT(DISTINCT ?uri) [[FROM_GRAPHS]] WHERE { ?uri a <http://eurocris.org/ontology/cerif#Person> }
#entities.8.searchQuery = SELECT DISTINCT ?uri ?label [[FROM_GRAPHS]] WHERE { ?uri a <http://eurocris.org/ontology/cerif#Person> ; <http://www.w3.org/2000/01/rdf-schema#label> ?label  [[FILTER(?label)]]  }
#entities.8.entityType = LITERAL
#entities.8.sourceUriVariable = ?uri
#
#entities.9.name = CerifOrganisation
#entities.9.instancesQuery = SELECT COUNT(DISTINCT ?uri) [[FROM_GRAPHS]] WHERE { ?uri a <http://eurocris.org/ontology/cerif#OrganisationUnit> }
#entities.9.searchQuery = SELECT DISTINCT ?uri ?name [[FROM_GRAPHS]] WHERE { ?uri a <http://eurocris.org/ontology/cerif#OrganisationUnit> ; <http://eurocris.org/ontology/cerif#has_name> ?name  [[FILTER(?name)]]  }
#entities.9.geoQuery = SELECT DISTINCT ?uri ?name ?east ?west ?north ?south [[FROM_GRAPHS]] where { ?uri a <http://eurocris.org/ontology/cerif#OrganisationUnit> ; <http://eurocris.org/ontology/cerif#has_name> ?name [[FILTER(?name)]] . ?uri <http://eurocris.org/ontology/cerif#is_source_of> ?FLE1 . ?FLE1 <http://eurocris.org/ontology/cerif#has_destination> ?PA . ?PA <http://eurocris.org/ontology/cerif#is_source_of> ?FLE2 . ?FLE2 <http://eurocris.org/ontology/cerif#has_destination> ?GBB . ?GBB <http://eurocris.org/ontology/cerif#has_eastBoundaryLongitude> ?east . ?GBB <http://eurocris.org/ontology/cerif#has_westBoundaryLongitude> ?west . ?GBB <http://eurocris.org/ontology/cerif#has_northBoundaryLatitude> ?north. ?GBB <http://eurocris.org/ontology/cerif#has_southBoundaryLatitude> ?south . [[GEOFILTER(xsd:float(?east);xsd:float(?west);xsd:float(?north);xsd:float(?south))]]}
#entities.9.entityType = LITERAL_GEOSPATIAL
#entities.9.sourceUriVariable = ?uri

#entities.9.name = Duration 
#entities.9.instancesQuery = SELECT COUNT(DISTINCT ?duration) [[FROM_GRAPHS]] WHERE { ?uri a <http://www.sealit.gr/ontology/sealit#Duration> ; <http://www.sealit.gr/ontology/sealit#value_duration> ?duration }
#entities.9.searchQuery = SELECT DISTINCT ?entity ?duration [[FROM_GRAPHS]] WHERE { ?entity <http://www.sealit.gr/ontology/sealit#had_duration> ?dur . ?dur <http://www.sealit.gr/ontology/sealit#value_duration> ?duration [[FILTER(xsd:float(?duration))]] }
#entities.9.entityType = NUMERIC
#entities.9.isVisibleInTarget = false

#entities.11.name = Yes/No
#entities.11.entityType = BOOLEAN
#entities.11.isVisibleInTarget = false
#
#entities.12.name = Lastname
##entities.12.instancesQuery = SELECT DISTINCT ?lastname [[FROM_GRAPHS]] WHERE { ?uri <http://www.sealit.gr/ontology/sealit#has_last_name> ?lastname }
##entities.12.searchQuery = SELECT DISTINCT ?uri ?lastname [[FROM_GRAPHS]] WHERE { ?uri <http://www.sealit.gr/ontology/sealit#has_last_name> ?lastname  [[FILTER(?lastname)]] }
#entities.12.entityType = STRING
#entities.12.isVisibleInTarget = false

#####################################
############# RELATIONS #############
#####################################

# ------ SOME GUIDELINES -------

# relations = ID1,ID2,ID3,ID4,...
# relations.ID.name // the display name of the relation
# relations.ID.sourceEntity // the ID of the 'source' entity of the relation
# relations.ID.destinationEntity // the ID of the 'destonation' entity of the relation
# relations.ID.relationGraphPattern // the graph pattern that connects/relates the source entity with the destination entity
   # the parameter [[i]] defines variables of the 'source' entity
   # the parameter [[j]] defines variables of the 'destination' entity
   # the parameter [[k]] defines variables of other entitites that participate in the graph pattern (e.g., entities that connect the source entity with the destination entity in the graph pattern)
# relations.ID.sourceUriVariable // it defines the URI variable of the source entity
# relations.ID.sourceShownVariables // it defines the variables to show in the results table for the source entity
# relations.ID.destinationUriVariable // it defines the URI variable of the destination entity
# relations.ID.destinationShownVariables // it defines the variables to show in the results table for the destination entity
# relations.ID.sourceFilterPattern // it defines how to filter the source entities (either through search or by selecting specific entities) - it contains the template parameters [[FILTER(VARIABLE_TO_FILTER)]] [[VALUES(VARIABLE_ENTITY_URI_TO_FILTER)]]
# relations.ID.destinationFilterPattern // it defines how to filter the destination entities (either through search or by selecting specific entities) - it contains the template parameters [[FILTER(VARIABLE_TO_FILTER)]] [[VALUES(VARIABLE_ENTITY_URI_TO_FILTER)]]


relations = 11,12,13,14,15,16,17,19,20,21,23,24,25

relations.11.name = has location of residence
relations.11.sourceEntity = 1
relations.11.destinationEntity = 2 
relations.11.relationGraphPattern = ?person[[i]] a <http://www.cidoc-crm.org/cidoc-crm/E21_Person> ; <http://www.w3.org/2002/07/owl#sameAs> ?sameas[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[i]] . \
   ?sameas[[k]] <http://www.cidoc-crm.org/cidoc-crm/P74_has_current_or_former_residence> ?loc[[k]] . \
   ?location[[j]] <http://www.w3.org/2002/07/owl#sameAs> ?loc[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?location_name[[j]]
relations.11.sourceUriVariable = ?person[[i]]
relations.11.sourceShownVariables = ?person_name[[i]]
relations.11.destinationUriVariable = ?location[[j]]
relations.11.destinationShownVariables = ?location_name[[j]]
relations.11.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
relations.11.destinationFilterPattern = [[REGEX(?location_name[[j]])]] [[VALUES(?location[[j]])]]

relations.12.name = arrived at (as finally destination)
relations.12.sourceEntity = 1
relations.12.destinationEntity = 2 
relations.12.relationGraphPattern =  ?person[[i]] <http://www.w3.org/2002/07/owl#sameAs> ?sameAsPerson[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[i]] . \
    ?voyage[[k]] <http://www.cidoc-crm.org/cidoc-crm/P14_carried_out_by> ?sameAsPerson[[k]] ; <http://www.sealit.gr/ontology/sealit#destination> ?loc[[k]] . \
    ?location[[j]] <http://www.w3.org/2002/07/owl#sameAs> ?loc[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?location_name[[j]] 
relations.12.sourceUriVariable = ?person[[i]]
relations.12.sourceShownVariables = ?person_name[[i]]
relations.12.destinationUriVariable = ?location[[j]]
relations.12.destinationShownVariables = ?location_name[[j]]
relations.12.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
relations.12.destinationFilterPattern = [[REGEX(?location_name[[j]])]] [[VALUES(?location[[j]])]]

relations.13.name = embarked at
relations.13.sourceEntity = 1
relations.13.destinationEntity = 2 
relations.13.relationGraphPattern = ?person[[i]] <http://www.w3.org/2002/07/owl#sameAs> ?sameas[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[i]] . \
   ?sameas[[k]] <http://www.sealit.gr/ontology/sealit#received_money> ?gserv[[k]] . ?gserv[[k]] <http://www.sealit.gr/ontology/sealit#for_service> ?service[[k]] . \
   ?service[[k]] <http://www.sealit.gr/ontology/sealit#started_by> ?startedBy[[k]] . ?startedBy[[k]] <http://www.cidoc-crm.org/cidoc-crm/P7_took_place_at> ?loc[[k]] . \
   ?location[[j]] <http://www.w3.org/2002/07/owl#sameAs> ?loc[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?location_name[[j]] 
relations.13.sourceUriVariable = ?person[[i]]
relations.13.sourceShownVariables = ?person_name[[i]]
relations.13.destinationUriVariable = ?location[[j]]
relations.13.destinationShownVariables = ?location_name[[j]]
relations.13.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
relations.13.destinationFilterPattern = [[REGEX(?location_name[[j]])]] [[VALUES(?location[[j]])]]

relations.14.name = discharged at
relations.14.sourceEntity = 1
relations.14.destinationEntity = 2 
relations.14.relationGraphPattern = ?person[[i]] <http://www.w3.org/2002/07/owl#sameAs> ?sameas[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[i]] . \
   ?sameas[[k]] <http://www.sealit.gr/ontology/sealit#received_money> ?gserv[[k]] . ?gserv[[k]] <http://www.sealit.gr/ontology/sealit#for_service> ?service[[k]] . \
   ?service[[k]] <http://www.sealit.gr/ontology/sealit#ended_by> ?endedBy[[k]] . ?endedBy[[k]] <http://www.cidoc-crm.org/cidoc-crm/P7_took_place_at> ?loc[[k]] . \
   ?location[[j]] <http://www.w3.org/2002/07/owl#sameAs> ?loc[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?location_name[[j]] 
relations.14.sourceUriVariable = ?person[[i]]
relations.14.sourceShownVariables = ?person_name[[i]]
relations.14.destinationUriVariable = ?location[[j]]
relations.14.destinationShownVariables = ?location_name[[j]]
relations.14.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
relations.14.destinationFilterPattern = [[REGEX(?location_name[[j]])]] [[VALUES(?location[[j]])]]

relations.15.name = was crew of
relations.15.sourceEntity = 1
relations.15.destinationEntity = 3
relations.15.relationGraphPattern = ?person[[i]] <http://www.w3.org/2002/07/owl#sameAs> ?sameAsPerson[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[i]] . \
?ship[[j]] <http://www.w3.org/2002/07/owl#sameAs> ?sameAsShip[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?ship_name[[j]] . \
?sameAsShip[[k]] <http://www.sealit.gr/ontology/sealit#voyages> ?voyage[[k]] . \
?voyage[[k]] <http://www.cidoc-crm.org/cidoc-crm/P14_carried_out_by> ?sameAsPerson[[k]] .
relations.15.sourceUriVariable = ?person[[i]]
relations.15.sourceShownVariables = ?person_name[[i]]
relations.15.destinationUriVariable = ?ship[[j]]
relations.15.destinationShownVariables = ?ship_name[[j]]
relations.15.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
relations.15.destinationFilterPattern = [[REGEX(?ship_name[[j]])]] [[VALUES(?ship[[j]])]]

relations.16.name = was owner of
relations.16.sourceEntity = 1
relations.16.destinationEntity = 3
relations.16.relationGraphPattern = ?person[[i]] <http://www.w3.org/2002/07/owl#sameAs> ?sameAsPerson[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[i]] . \
?ship[[j]] <http://www.w3.org/2002/07/owl#sameAs> ?sameAsShip[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?ship_name[[j]] . \
?sameAsShip[[k]] <http://www.sealit.gr/ontology/sealit#has_ownership_phase> ?phase[[k]] . \
?phase[[k]] <http://www.sealit.gr/ontology/sealit#has_owner> ?sameAsPerson[[i]] .
relations.16.sourceUriVariable = ?person[[i]]
relations.16.sourceShownVariables = ?person_name[[i]]
relations.16.destinationUriVariable = ?ship[[j]]
relations.16.destinationShownVariables = ?ship_name[[j]]
relations.16.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
relations.16.destinationFilterPattern = [[REGEX(?ship_name[[j]])]] [[VALUES(?ship[[j]])]]

relations.17.name = was captain of
relations.17.sourceEntity = 1
relations.17.destinationEntity = 3
relations.17.relationGraphPattern = ?person[[i]] <http://www.w3.org/2002/07/owl#sameAs> ?sameAsPerson[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[i]] . \
?ship[[j]] <http://www.w3.org/2002/07/owl#sameAs> ?sameAsShip[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?ship_name[[j]] . \
?sameAsShip[[k]] <http://www.sealit.gr/ontology/sealit#voyages> ?voyage[[k]] . \
?voyage[[k]] <http://www.cidoc-crm.org/cidoc-crm/P14_carried_out_by> ?sameAsPerson[[k]] . \
?sameAsPerson[[k]] <http://www.sealit.gr/ontology/sealit#has_profession> ?profession[[k]] FILTER REGEX(STR(?profession[[k]]), "capitano", "i")
# ?sameAsPerson[[k]] <http://www.sealit.gr/ontology/sealit#had_provided> ?serv[[k]] . ?serv[[k]] <http://www.cidoc-crm.org/cidoc-crm/P02i_is_range_of> ?range[[k]] . ?range[[k]] <http://www.cidoc-crm.org/cidoc-crm/P.1a_in_the_role_of> ?profession[[k]] FILTER REGEX(STR(?profession[[k]]), "capitano", "i") 
relations.17.sourceUriVariable = ?person[[i]]
relations.17.sourceShownVariables = ?person_name[[i]]
relations.17.destinationUriVariable = ?ship[[j]]
relations.17.destinationShownVariables = ?ship_name[[j]]
relations.17.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
relations.17.destinationFilterPattern = [[REGEX(?ship_name[[j]])]] [[VALUES(?ship[[j]])]]

#relations.18.name = was member of
#relations.18.sourceEntity = 1
#relations.18.destinationEntity = 6 
#relations.18.relationGraphPattern = ?person[[i]] <http://www.cidoc-crm.org/cidoc-crm/P107i_is_current_or_former_member_of> ?legal_body[[j]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[i]]. ?legal_body[[j]] <http://www.w3.org/2000/01/rdf-schema#label> ?name_of_legal_body[[j]] 
#relations.18.sourceUriVariable = ?person[[i]]
#relations.18.sourceShownVariables = ?person_name[[i]]
#relations.18.destinationUriVariable = ?legal_body[[j]]
#relations.18.destinationShownVariables = ?name_of_legal_body[[j]]
#relations.18.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
#relations.18.destinationFilterPattern = [[REGEX(?name_of_legal_body[[j]])]] [[VALUES(?legal_body[[j]])]]

relations.19.name = occupied in
relations.19.sourceEntity = 1
relations.19.destinationEntity = 5 
relations.19.relationGraphPattern = ?person[[i]] <http://www.w3.org/2002/07/owl#sameAs> ?sameAsPerson[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[i]] . \
?sameAsPerson[[k]] <http://www.sealit.gr/ontology/sealit#received_money> ?employment[[j]] . ?employment[[j]] <http://www.sealit.gr/ontology/sealit#for_service> ?serv[[k]] . ?serv[[k]] <http://www.w3.org/2000/01/rdf-schema#label> ?employment_name[[j]]
relations.19.sourceUriVariable = ?person[[i]]
relations.19.sourceShownVariables = ?person_name[[i]]
relations.19.destinationUriVariable = ?employment[[j]]
relations.19.destinationShownVariables = ?employment_name[[j]]
relations.19.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
relations.19.destinationFilterPattern = [[REGEX(?employment_name[[j]])]] [[VALUES(?employment[[j]])]]

relations.20.name = was in
relations.20.sourceEntity = 1
relations.20.destinationEntity = 4 
relations.20.relationGraphPattern = ?person[[i]] <http://www.w3.org/2002/07/owl#sameAs> ?sameAsPerson[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[i]] . \
?voyage[[j]] <http://www.cidoc-crm.org/cidoc-crm/P14_carried_out_by> ?sameAsPerson[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?voyage_name[[j]]
relations.20.sourceUriVariable = ?person[[i]]
relations.20.sourceShownVariables = ?person_name[[i]]
relations.20.destinationUriVariable = ?voyage[[j]]
relations.20.destinationShownVariables = ?voyage_name[[j]]
relations.20.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
relations.20.destinationFilterPattern = [[REGEX(?voyage_name[[j]])]] [[VALUES(?voyage[[j]])]]

relations.21.name = is referred to by
relations.21.sourceEntity = 1
relations.21.destinationEntity = 7 
relations.21.relationGraphPattern = ?person[[i]] a <http://www.cidoc-crm.org/cidoc-crm/E21_Person> ; <http://www.w3.org/2002/07/owl#sameAs> ?sameAsPerson[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[i]] . \
?rec[[k]] <http://www.cidoc-crm.org/cidoc-crm/P67_refers_to> ?sameAsPerson[[k]] ; <http://www.cidoc-crm.org/cidoc-crm/P67_refers_to> ?record[[j]] . ?record[[j]] <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/doc%20types/record%20information> ; <http://www.w3.org/2000/01/rdf-schema#label> ?record_name[[j]]
relations.21.sourceUriVariable = ?person[[i]]
relations.21.sourceShownVariables = ?person_name[[i]]
relations.21.destinationUriVariable = ?record[[j]]
relations.21.destinationShownVariables = ?record_name[[j]]
relations.21.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
relations.21.destinationFilterPattern = [[REGEX(?record_name[[j]])]] [[VALUES(?record[[j]])]]

#relations.22.name = transcribed
#relations.22.sourceEntity = 1
#relations.22.destinationEntity = 7 
#relations.22.relationGraphPattern = ?record[[i]] <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://rs.sealitproject.eu/kb/doc%20types/record%20information> ; <http://www.w3.org/2000/01/rdf-schema#label> ?record_name[[j]] ; <http://www.cidoc-crm.org/cidoc-crm/P94i_was_created_by> ?creation[[k]] . ?creation[[k]]  <http://www.cidoc-crm.org/cidoc-crm/P14_carried_out_by> ?person[[i]] . ?person[[i]]  <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[i]] 
#relations.22.sourceUriVariable = ?person[[i]]
#relations.22.sourceShownVariables = ?person_name[[i]]
#relations.22.destinationUriVariable = ?record[[j]]
#relations.22.destinationShownVariables = ?record_name[[j]]
#relations.22.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
#relations.22.destinationFilterPattern = [[REGEX(?record_name[[j]])]] [[VALUES(?record[[j]])]]

relations.23.name = was born in
relations.23.sourceEntity = 1
relations.23.destinationEntity = 9 
relations.23.relationGraphPattern = ?person[[i]] <http://www.cidoc-crm.org/cidoc-crm/P98i_was_born> ?born[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[k]]. ?born[[k]] <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?timespan[[k]] . ?timespan[[k]] <http://www.cidoc-crm.org/cidoc-crm/P82_at_some_time_within> ?birth_date[[j]]
relations.23.sourceUriVariable = ?person[[i]]
relations.23.sourceShownVariables = ?person_name[[i]]
relations.23.destinationShownVariables = (year(?birth_date[[j]]) as ?year[[j]])
relations.23.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
relations.23.destinationFilterPattern =  [[FILTER(year(?birth_date[[j]]))]]

# DRAFT
relations.24.name = embarked in
relations.24.sourceEntity = 1
relations.24.destinationEntity = 8 
relations.24.relationGraphPattern = ?person[[i]] <http://www.w3.org/2002/07/owl#sameAs> ?sameas[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[i]] . \
   ?sameas[[k]] <http://www.sealit.gr/ontology/sealit#received_money> ?gserv[[k]] . ?gserv[[k]] <http://www.sealit.gr/ontology/sealit#for_service> ?service[[k]] . \
   ?service[[k]] <http://www.sealit.gr/ontology/sealit#started_by> ?startedBy[[k]] . ?startedBy[[k]] <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?timespan[[k]] . \
   ?timespan[[k]] <http://www.cidoc-crm.org/cidoc-crm/P82_at_some_time_within> ?date[[j]]
relations.24.sourceUriVariable = ?person[[i]]
relations.24.sourceShownVariables = ?person_name[[i]]
relations.24.destinationShownVariables = ?date[[j]]
relations.24.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
relations.24.destinationFilterPattern =  [[FILTER(?date[[j]])]]

relations.25.name = discharged in
relations.25.sourceEntity = 1
relations.25.destinationEntity = 8 
relations.25.relationGraphPattern = ?person[[i]] <http://www.w3.org/2002/07/owl#sameAs> ?sameas[[k]] ; <http://www.w3.org/2000/01/rdf-schema#label> ?person_name[[i]] . \
   ?sameas[[k]] <http://www.sealit.gr/ontology/sealit#received_money> ?gserv[[k]] . ?gserv[[k]] <http://www.sealit.gr/ontology/sealit#for_service> ?service[[k]] . \
   ?service[[k]] <http://www.sealit.gr/ontology/sealit#ended_by> ?endedBy[[k]] . ?endedBy[[k]] <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?timespan[[k]] . \
   ?timespan[[k]] <http://www.cidoc-crm.org/cidoc-crm/P82_at_some_time_within> ?date[[j]]
relations.25.sourceUriVariable = ?person[[i]]
relations.25.sourceShownVariables = ?person_name[[i]]
relations.25.destinationShownVariables = ?date[[j]]
relations.25.sourceFilterPattern = [[REGEX(?person_name[[i]])]] [[VALUES(?person[[i]])]]
relations.25.destinationFilterPattern =  [[FILTER(?date[[j]])]]


#relations.6.name = had crew
#relations.6.sourceEntity = 3
#relations.6.destinationEntity = 1
#relations.6.relationGraphPattern = ?person[[j]] a <http://www.cidoc-crm.org/cidoc-crm/E21_Person> . ?ship[[i]] a  <http://www.sealit.gr/ontology/sealit#Ship> ; <http://www.w3.org/2000/01/rdf-schema#label> ?shipname[[i]] .  ?ship[[i]] <http://www.sealit.gr/ontology/sealit#voyages> ?voyage[[k]] . ?voyage[[k]] <http://www.cidoc-crm.org/cidoc-crm/P14_carried_out_by> ?person[[j]] . OPTIONAL { ?person[[j]] <http://www.sealit.gr/ontology/sealit#has_first_name> ?firstname[[j]] } OPTIONAL { ?person[[j]] <http://www.sealit.gr/ontology/sealit#has_last_name> ?lastname[[j]] }
#relations.6.sourceUriVariable = ?ship[[i]]
#relations.6.sourceShownVariables = ?shipname[[i]]
#relations.6.destinationUriVariable = ?person[[j]]
#relations.6.destinationShownVariables = ?firstname[[j]] ?lastname[[j]]
#relations.6.sourceFilterPattern = ?ship[[i]] <http://www.w3.org/2000/01/rdf-schema#label> ?shiplabel[[k]]  [[FILTER(?shiplabel[[k]])]] [[VALUES(?ship[[i]])]]
#relations.6.destinationFilterPattern = ?person[[j]] <http://www.w3.org/2000/01/rdf-schema#label> ?personlabel[[k]]  [[FILTER(?personlabel[[k]])]] [[VALUES(?person[[j]])]]
#
#relations.7.name = begin date
#relations.7.sourceEntity = 4
#relations.7.destinationEntity = 7
#relations.7.relationGraphPattern = ?voyage[[i]] a <http://www.sealit.gr/ontology/sealit#Voyage> ; <http://www.w3.org/2000/01/rdf-schema#label> ?voyagename[[i]]. ?voyage[[i]] <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?timespan[[k]] .  ?timespan[[k]] <http://www.cidoc-crm.org/cidoc-crm/P82a_begin_of_the_begin> ?begin_date[[j]]
#relations.7.sourceUriVariable = ?voyage[[i]]
#relations.7.sourceShownVariables = ?voyagename[[i]]
#relations.7.destinationUriVariable = ?begin_date[[j]]
#relations.7.sourceFilterPattern = ?voyage[[i]] a <http://www.sealit.gr/ontology/sealit#Voyage> ; <http://www.w3.org/2000/01/rdf-schema#label> ?voyageLabel[[k]]  [[FILTER(?voyageLabel[[k]])]] [[VALUES(?voyage[[i]])]]
#relations.7.destinationFilterPattern = ?voyage[[i]] <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?timespan[[k]] . ?timespan[[k]] <http://www.cidoc-crm.org/cidoc-crm/P82a_begin_of_the_begin> ?begin_date[[j]] [[FILTER(?begin_date[[j]])]]
#
#relations.8.name = begin date of 
#relations.8.sourceEntity = 7
#relations.8.destinationEntity = 4
#relations.8.relationGraphPattern =  ?voyage[[j]] a <http://www.sealit.gr/ontology/sealit#Voyage> ; <http://www.w3.org/2000/01/rdf-schema#label> ?voyagename[[j]]. ?voyage[[j]] <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?timespan[[k]] .  ?timespan[[k]] <http://www.cidoc-crm.org/cidoc-crm/P82a_begin_of_the_begin> ?begin_date[[i]]
#relations.8.sourceUriVariable = ?begin_date[[i]] 
#relations.8.destinationUriVariable = ?voyage[[j]]
#relations.8.destinationShownVariables = ?voyagename[[j]]
#relations.8.sourceFilterPattern = ?voyage[[j]] <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?timespan[[k]] . ?timespan[[k]] <http://www.cidoc-crm.org/cidoc-crm/P82a_begin_of_the_begin> ?begin_date[[i]] [[FILTER(?begin_date[[i]])]]
#relations.8.destinationFilterPattern = ?voyage[[j]] a <http://www.sealit.gr/ontology/sealit#Voyage> ; <http://www.w3.org/2000/01/rdf-schema#label> ?voyageLabel[[k]] [[FILTER(?voyageLabel[[k]])]] [[VALUES(?voyage[[j]])]]

# ==================================

